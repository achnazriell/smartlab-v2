[build]
builder = "nixpacks"
buildCommand = "npm install && npm run build"
startCommand = "php artisan serve --host=0.0.0.0 --port=8080"

[build.environment]
NODE_VERSION = "18"
PHP_VERSION = "8.2"
COMPOSER_VERSION = "2"

[deploy]
# RESET DATABASE + JALANKAN SEEDER
preDeployCommand = "php artisan config:cache && php artisan migrate --seed --force"

[[services]]
type = "web"
healthcheckPath = "/health"
healthcheckTimeout = 60
numReplicas = 1
